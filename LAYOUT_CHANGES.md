# 布局重构：从垂直布局到水平布局

## 概述

本次更新将任务管理系统的布局从**上下垂直布局**（顶部导航栏）重构为**左右水平布局**（左侧边栏），以提供更现代化的用户体验。

## 主要变化

### 1. 导航结构变化

#### 原布局（垂直）
- 顶部固定导航栏（44px 高度）
- 水平导航链接
- 用户菜单在右侧
- 主内容区占满全宽（最大 800px）

#### 新布局（水平）
- 左侧固定侧边栏（280px 宽度）
- 垂直导航链接带图标
- 用户菜单在侧边栏底部
- 主内容区在右侧（最大 1200px）

### 2. 样式改进

#### 侧边栏特性
- **宽度**: 280px（桌面端），240px（平板端）
- **背景色**: `#fcfaf8`（浅米色）
- **边框**: 右侧 1px 浅色边框
- **布局**: Flexbox 垂直布局
  - 顶部：Logo 区域
  - 中间：导航菜单（flex: 1）
  - 底部：用户信息

#### 导航链接样式
- 每个链接包含 SVG 图标
- 活动状态：红色左边框 + 浅红背景
- 悬停效果：浅灰背景
- 间距：10px 上下，24px 左右

#### 主内容区调整
- 左边距：280px（为侧边栏留出空间）
- 最大宽度：从 800px 增加到 1200px
- 保持原有的内边距和样式

### 3. 响应式设计

#### 桌面端 (>1024px)
- 完整的 280px 侧边栏
- 主内容区自适应宽度

#### 平板端 (768-1024px)
- 缩小的 240px 侧边栏
- 减小内容区内边距

#### 移动端 (≤768px)
- 侧边栏默认隐藏（left: -280px）
- 汉堡菜单按钮（左上角）
- 点击按钮显示侧边栏
- 半透明遮罩层
- 点击遮罩或链接关闭侧边栏

### 4. 文件修改

#### CSS 文件 (`css/style.css`)
```css
/* 新增样式 */
.sidebar                 /* 侧边栏容器 */
.sidebar-header          /* 侧边栏头部 */
.sidebar-nav             /* 导航区域 */
.sidebar-footer          /* 底部用户区域 */
.main-wrapper            /* 主内容包装器 */
.mobile-menu-toggle      /* 移动端菜单按钮 */
.sidebar-overlay         /* 移动端遮罩层 */

/* 修改样式 */
.nav-link               /* 从水平改为垂直 */
.container              /* 调整最大宽度和边距 */
```

#### PHP 文件
- `includes/header.php`: 完全重写，使用侧边栏结构
- `dashboard.php`: 添加 `.main-wrapper` 包装器
- `tasks.php`: 添加 `.main-wrapper` 包装器
- `stats.php`: 添加 `.main-wrapper` 包装器

#### 文档文件
- `README.md`: 更新 UI/UX 特性描述
- `TODOIST_DESIGN.md`: 更新布局特点和响应式设计说明

### 5. 交互改进

#### 侧边栏滚动
- 自定义滚动条样式（6px 宽度）
- 圆角滚动条滑块
- 悬停时颜色变化

#### 移动端菜单
- 点击汉堡按钮切换侧边栏
- 0.3s 平滑过渡动画
- 遮罩层淡入淡出效果
- 点击导航链接自动关闭（移动端）

#### 导航高亮
- 活动页面：红色左边框 + 浅红背景
- 图标和文字统一高亮
- 平滑的颜色过渡

## 兼容性

### 浏览器支持
- Chrome/Edge: ✅ 完全支持
- Firefox: ✅ 完全支持
- Safari: ✅ 完全支持
- IE11: ❌ 不支持（使用 CSS 变量和 Flexbox）

### 设备支持
- 桌面端: ✅ 优化体验
- 平板端: ✅ 适配布局
- 移动端: ✅ 滑出式菜单

## 技术细节

### CSS 变量
保持原有的 Todoist 配色方案：
```css
--bg-sidebar: #fcfaf8;      /* 侧边栏背景 */
--todoist-red: #dc4c3e;     /* 品牌红色 */
--bg-hover: #f3f3f3;        /* 悬停背景 */
```

### JavaScript
在 `includes/header.php` 中添加了简单的 JavaScript：
- 侧边栏切换功能
- 遮罩层点击关闭
- 移动端链接点击自动关闭

### 性能优化
- 使用 CSS 过渡而非 JavaScript 动画
- 固定定位侧边栏避免重排
- 最小化 DOM 操作

## 迁移指南

如果要将自定义页面适配新布局：

1. 添加 `.main-wrapper` 包装器：
```php
<body>
    <?php include 'includes/header.php'; ?>
    
    <div class="main-wrapper">
        <div class="container">
            <!-- 你的内容 -->
        </div>
    </div>
</body>
```

2. 不需要修改 CSS（已全局适配）

3. 确保移动端测试（汉堡菜单功能）

## 未来改进

- [ ] 添加侧边栏折叠/展开功能（桌面端）
- [ ] 支持自定义侧边栏宽度
- [ ] 添加侧边栏主题切换
- [ ] 支持多级导航菜单
- [ ] 添加快捷键支持（如 Ctrl+B 切换侧边栏）

## 总结

这次重构实现了从传统的上下布局到现代的左右布局的转变，同时：

✅ 保持了 Todoist 的设计语言  
✅ 改进了响应式体验  
✅ 增强了导航可用性  
✅ 提供了更多的内容展示空间  
✅ 保持了代码的简洁性

用户现在可以享受更加现代化和高效的任务管理体验！
